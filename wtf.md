
# 封包格式

| 編號 | 名稱 | 大小(byte) | 資料 | 備註 |  
| :--- | :--- | :--- | :--- | :--- |  
| 0 | HEADER   | 1 | 0xFD |  |
| 1 | ADDRES   | 2 |  |  |
| 2 | FUNCTION | 1 |  |  |
| 3 | SEQUENCE | 1 |  | bit 0~4 : seq 代表當前封包編號 <br> bit 5 : isContinuous 此封包結束後是否還有封包 <br> bit 6~7 : 無意義  |
| 4 | LENGTH   | 2 |  | 決定DATA欄位的資料大小 |
| 5 | DATA     | N |  | 依據LENGTH欄位決定大小 |
| 6 | CHKSUKM  | 1 |  | 編號 1~5 資料總和對0xFF取餘 |

## 整體

    NOTE 待決定：最大封包長度

主(Master)去詢問或下命令給僕(Slave)裝置，僕裝置依照FUNCTION欄位決定動作(Action)，並做出相對回應(Response)。

可用在以下的硬體上。
### For 6w485
一對多的主僕通訊。  
待補

### For Serial
一對一的串列埠通訊。  
待補


## ADDRESS

    NOTE 待決定：ADDRES大小1或2bytes

ADDRES為代表裝置位址，表示此封包需要傳送到哪個裝置上。  
0 為廣播用。  
1 通常為主使用裝置位址。  
其餘位址則可任意當作裝置位址。  


## FUNCTION

表示此封包的功用，並有不同使用方法，但核心皆為主去詢問或下命令給僕裝置。


| 編號 | 名稱 | 資料大小(byte) | 資料 | 備註 |  
| :--- | :--- | :--- | :--- | :--- |  
| 0 |  |  |  | 不使用 |
| 1 | Sync | 0 | 無 | 確認裝置活著啦，爽啦，叫他吃金客啦 |
| 2 | Ack  | 0 | 無 |  |
| 3 | Nack | 0 | 無 |  |
| 4 | SET |  |  | 寫入 1byte "設定用"暫存器 ????????????????????? |
| 5 | PUT |  |  | 寫入 1byte "資料"暫存器 |
| 5 | GET |  |  | 讀取 1byte "資料"暫存器 |
| 6 | SPUT |  |  | 寫入 N bytes "資料"暫存器 |
| 7 | SGET |  |  | 讀取 N bytes "資料"暫存器 |
| 8 | FRC |  |  |  |
| 9 | FTM |  |  |  |
|  |  |  |  |  |
| 10 | ??? |  |  | 設定6w485裝置開關 |
| 11 | ??? |  |  | 設定6w485裝置IRQ開關 |
| 12 | ??? |  |  | 設定6w485裝置ISR開關 |
| 13 | ??? |  |  | 設定6w485裝置自我毀廟倒數計時 |
|  |  |  |  |  |
| 20 | ??? |  |  | Array 資料發送 |
| 21 | ??? |  |  | Array 資料接收 |
| 22 | ??? |  |  | Struct 資料發送 |
| 23 | ??? |  |  | Struct 資料接收 |



## SEQUENCE

代表此封包在連續傳輸封包中的序列，並表示是否有接續的封包。  
其中不同bits代表不同意義。  

bit 0~4 : seq - 代表當前的序列範圍為0~31。  
bit   5 : isContinuous - 代表是否有接續的封包
bit 6~7 : 無意義。
